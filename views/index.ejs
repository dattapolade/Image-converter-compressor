<!DOCTYPE html>
<html>

<head>
	<title>Image Converter and Resizer</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
	<link rel="stylesheet" href="style/dj.css">
	<script src="https://kit.fontawesome.com/eccf537c80.js" crossorigin="anonymous"></script>
</head>

<body>
	<nav class="navbar navbar-expand-lg bg-body-tertiary">
		<div class="container-fluid">
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01"
				aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarTogglerDemo01">
				<a class="navbar-brand" href="#"><b>Converter & compressor</b></a>
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="#">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">About</a>
					</li>
					<li class="nav-item">
						<a class="nav-link ">contact</a>
					</li>
				</ul>
				<form class="d-flex" role="search">
					<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
					<button class="btn btn-outline-success" type="submit">Search</button>
				</form>
			</div>
		</div>
	</nav>




	<div class="heading-conatiner">
		<% if (!converted) { %>
		<h2 class="heading">Image Converter and compressor</h2>
		<p>Convert image files of any formats</p>
	</div>
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-8">
				<div class="outer-box">
					<div class="inner-box">
							<form method="POST" enctype="multipart/form-data" action="/upload">
								<div class="form-group">
									<label for="file-input" class="btn btn-primary">
										<i class="fas fa-upload"></i> Upload the Image
									</label>
									<input type="file" id="file-input" name="image" accept="image/*" class="d-none">
									<span id="image-name"></span>
								</div>
								<div class="form-group">
									<div class="row">
										<div class="col-6"><label for="format">Compress image file to </label>
											<select name="format">
												<option value="jpeg">JPEG</option>
												<option value="png">PNG</option>
												<option value="webp">WebP</option>
											</select>
										</div>
									</div>
								</div>
								<div class="form-group">
									<div class="row">
										<div class="col-2">
											<label for="format">Choose Quality</label>
										</div>
										<div class="col-8">
											<input type="number" name="width" placeholder="Width (px)" />
											<input type="number" name="height" placeholder="Height (px)" />
										</div>
									</div>
								</div>
								<div style="display: flex; justify-content: center; align-items: center; ">
									<input type="submit" value="Convert/Resize" />
								</div>
							</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<% } %>


<% if (converted) { %>

	 <h2 class="heading">Converted/Resized Image</h2> 
	<div class="image-container">
		<img src="<%= converted %>"
		alt="Converted/Resized Image" />
	</div>
	<div style="display: flex; justify-content: center; align-items: center; margin-top: 10px;">
	
		<a class="download-link" href="/download?path=<%= converted %>">
			<i class="fa fa-download"></i> Download Converted/Resized Image
		  </a>
	</div>
	<% } %>

</body>

<script>
	const imageUpload = document.getElementById('file-input');
	const imageName = document.getElementById('image-name');
	imageUpload.addEventListener('change', function () {
		const files = this.files;
		if (files.length > 0) {
			imageName.textContent = files[0].name;
		} else {
			imageName.textContent = '';
		}
	});
</script>

</html>